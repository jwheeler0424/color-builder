/* ─── Design Tokens ─────────────────────────────────────────────────────────── */
.ch-app {
  --ch-bg: #0a0a0a;
  --ch-s1: #111;
  --ch-s2: #181818;
  --ch-s3: #202020;
  --ch-b1: #222;
  --ch-b2: #333;
  --ch-t1: #f0f0f0;
  --ch-t2: #aaa;
  --ch-t3: #666;
  --ch-acc: #e8ff00;
  --ch-danger: #ff4455;
  --ch-r: 2px;
  --ch-fd: var(--font-sans);
  --ch-fm: var(--font-mono);
  --ch-ease: cubic-bezier(0.16, 1, 0.3, 1);
  --ch-pw: 320px;
}

/* ─── App shell ──────────────────────────────────────────────────────────────── */
.ch-app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
  background: var(--ch-bg);
  color: var(--ch-t1);
  font-family: var(--ch-fm);
  font-size: 13px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* ─── Header ─────────────────────────────────────────────────────────────────── */
.ch-hdr {
  display: flex;
  align-items: center;
  padding: 0 16px;
  height: 48px;
  border-bottom: 1px solid var(--ch-b1);
  background: var(--ch-s1);
  gap: 10px;
  flex-shrink: 0;
}
.ch-brand {
  font-family: var(--ch-fd);
  font-size: 16px;
  font-weight: 800;
  letter-spacing: -0.5px;
  flex-shrink: 0;
}
.ch-brand sup {
  font-size: 9px;
  color: var(--ch-t3);
  font-weight: 400;
}

/* ─── Nav ────────────────────────────────────────────────────────────────────── */
.ch-nav {
  display: flex;
  gap: 1px;
  flex: 1;
  overflow-x: auto;
  scrollbar-width: none;
}
.ch-nav::-webkit-scrollbar {
  display: none;
}
.ch-nb {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: var(--ch-r);
  border: 1px solid transparent;
  background: transparent;
  color: var(--ch-t3);
  font-family: var(--ch-fm);
  font-size: 11px;
  cursor: pointer;
  letter-spacing: 0.04em;
  white-space: nowrap;
  transition: color 100ms;
  text-decoration: none; /* reset <a> underline */
  -webkit-tap-highlight-color: transparent;
}
.ch-nb:hover {
  color: var(--ch-t1);
}
.ch-nb.on {
  background: var(--ch-s3);
  color: var(--ch-t1);
  border-color: var(--ch-b2);
}

/* ─── Header action buttons ──────────────────────────────────────────────────── */
.ch-hbtns {
  display: flex;
  gap: 5px;
  flex-shrink: 0;
}

/* ─── Views container ────────────────────────────────────────────────────────── */
.ch-views {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.ch-view-scroll {
  flex: 1;
  overflow: auto;
}
.ch-view-pad {
  padding: 24px;
}

/* ─── Buttons ────────────────────────────────────────────────────────────────── */
.ch-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 6px 11px;
  border-radius: var(--ch-r);
  font-family: var(--ch-fm);
  font-size: 11px;
  font-weight: 700;
  cursor: pointer;
  border: 1px solid transparent;
  letter-spacing: 0.04em;
  white-space: nowrap;
  transition:
    background 100ms,
    color 100ms,
    border-color 100ms;
  user-select: none;
}
.ch-btn-sm {
  padding: 4px 8px;
  font-size: 10px;
}
.ch-btn-primary {
  background: var(--ch-acc);
  color: #000;
  border-color: var(--ch-acc);
}
.ch-btn-primary:hover {
  background: #fff;
  border-color: #fff;
}
.ch-btn-ghost {
  background: transparent;
  color: var(--ch-t2);
  border-color: var(--ch-b1);
}
.ch-btn-ghost:hover {
  color: var(--ch-t1);
  border-color: var(--ch-b2);
}
.ch-btn-danger {
  background: transparent;
  color: var(--ch-danger);
  border-color: var(--ch-danger);
}
.ch-btn-danger:hover {
  background: var(--ch-danger);
  color: #fff;
}

/* ─── Inputs ─────────────────────────────────────────────────────────────────── */
.ch-inp {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: var(--ch-r);
  color: var(--ch-t1);
  font-family: var(--ch-fm);
  font-size: 12px;
  padding: 6px 9px;
  outline: none;
  transition: border-color 100ms;
  width: 100%;
}
.ch-inp::placeholder {
  color: var(--ch-t3);
}
.ch-inp:focus {
  border-color: var(--ch-acc);
}
.ch-inp.err {
  border-color: var(--ch-danger);
}

/* ─── Range sliders ──────────────────────────────────────────────────────────── */
.ch-range {
  -webkit-appearance: none;
  height: 2px;
  background: var(--ch-b2);
  border-radius: 1px;
  outline: none;
  cursor: pointer;
  width: 100%;
}
.ch-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 13px;
  height: 13px;
  background: var(--ch-acc);
  border-radius: 50%;
  cursor: pointer;
}

/* ─── Labels ─────────────────────────────────────────────────────────────────── */
.ch-slabel {
  font-size: 10px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--ch-t3);
  margin-bottom: 10px;
  font-family: var(--ch-fd);
  font-weight: 600;
}
.ch-view-hd {
  margin-bottom: 20px;
}
.ch-view-hd h2 {
  font-family: var(--ch-fd);
  font-size: 20px;
  font-weight: 800;
  margin-bottom: 4px;
}
.ch-view-hd p {
  font-size: 12px;
  color: var(--ch-t3);
}

/* ─── Panel (sidebar) ────────────────────────────────────────────────────────── */
.ch-panel {
  width: var(--ch-pw);
  background: var(--ch-s1);
  border-left: 1px solid var(--ch-b1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
}
.ch-pscroll {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--ch-b2) transparent;
}
.ch-psec {
  padding: 14px 16px;
  border-bottom: 1px solid var(--ch-b1);
}

/* ─── Palette view ───────────────────────────────────────────────────────────── */
.ch-view-pal {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.ch-pstrip {
  flex: 1;
  display: flex;
  overflow: hidden;
}
.ch-slot {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 16px 12px;
  position: relative;
  transition: flex 140ms var(--ch-ease);
  min-width: 38px;
}
.ch-slot:hover {
  flex: 1.18;
}
.ch-slot-acts {
  position: absolute;
  top: 10px;
  right: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  opacity: 0;
  transition: opacity 120ms;
}
.ch-slot:hover .ch-slot-acts {
  opacity: 1;
}
.ch-slot-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.ch-slot-name {
  font-family: var(--ch-fd);
  font-size: 10px;
  font-weight: 600;
  opacity: 0.7;
}
.ch-slot-hex {
  font-family: var(--ch-fm);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  cursor: pointer;
}
.ch-slot-hsl {
  font-size: 10px;
  opacity: 0.55;
}
.ch-sbtn {
  width: 26px;
  height: 26px;
  border-radius: var(--ch-r);
  border: none;
  background: rgba(0, 0, 0, 0.45);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px);
  font-size: 12px;
  transition:
    background 100ms,
    transform 100ms;
}
.ch-sbtn:hover {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(1.08);
}
.ch-sbtn.locked {
  background: rgba(232, 255, 0, 0.2);
  color: var(--ch-acc);
}

/* Toast */
.ch-toast {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.88);
  color: #fff;
  padding: 4px 12px;
  border-radius: 2px;
  font-size: 11px;
  pointer-events: none;
  white-space: nowrap;
  animation: ch-tin 0.12s ease forwards;
  z-index: 10;
}
@keyframes ch-tin {
  from {
    opacity: 0;
    transform: translate(-50%, -44%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

/* Slot edit popover */
.ch-slot-edit-popover {
  position: absolute;
  bottom: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--ch-s1);
  border: 1px solid var(--ch-b2);
  border-radius: 4px;
  padding: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  z-index: 100;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  white-space: nowrap;
}
.ch-slot-edit-swatch {
  width: 28px;
  height: 28px;
  border-radius: 3px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  flex-shrink: 0;
}

/* Count slider */
.ch-count-num {
  font-family: var(--ch-fd);
  font-size: 22px;
  font-weight: 800;
  color: var(--ch-acc);
  min-width: 26px;
  text-align: center;
}

/* Themes */
.ch-themes-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}
.ch-theme-card {
  border-radius: 3px;
  overflow: hidden;
  cursor: pointer;
  border: 1px solid var(--ch-b1);
  transition: border-color 120ms;
}
.ch-theme-card:hover {
  border-color: var(--ch-b2);
}
.ch-theme-strip {
  height: 32px;
  display: flex;
}
.ch-theme-chip {
  flex: 1;
}
.ch-theme-label {
  padding: 6px 8px;
  background: var(--ch-s2);
  font-family: var(--ch-fd);
  font-size: 11px;
  font-weight: 600;
  color: var(--ch-t2);
}

/* Seeds */
.ch-seedlist {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 8px;
}
.ch-seeditem {
  display: flex;
  align-items: center;
  gap: 6px;
}
.ch-seedsw {
  width: 18px;
  height: 18px;
  border-radius: 2px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  flex-shrink: 0;
}
.ch-seedhex {
  flex: 1;
  font-size: 10px;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--ch-t2);
}
.ch-seedrm {
  background: none;
  border: none;
  color: var(--ch-t3);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  transition: color 100ms;
}
.ch-seedrm:hover {
  color: var(--ch-danger);
}
.ch-seedrow {
  display: flex;
  gap: 5px;
}

/* Harmony */
.ch-hdesc {
  font-size: 11px;
  color: var(--ch-t3);
  margin-bottom: 8px;
  line-height: 1.6;
  min-height: 2.4em;
}
.ch-hgrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px;
}
.ch-hbtn {
  padding: 6px 8px;
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: var(--ch-r);
  color: var(--ch-t3);
  font-family: var(--ch-fm);
  font-size: 11px;
  cursor: pointer;
  text-align: left;
  transition:
    border-color 100ms,
    color 100ms,
    background 100ms;
}
.ch-hbtn:hover {
  border-color: var(--ch-b2);
  color: var(--ch-t1);
}
.ch-hbtn.on {
  background: var(--ch-acc);
  border-color: var(--ch-acc);
  color: #000;
  font-weight: 700;
}

/* Preview strip + gen bar */
.ch-prevstrip {
  display: flex;
  height: 22px;
  border-radius: 2px;
  overflow: hidden;
  gap: 2px;
  margin-top: 8px;
}
.ch-genbar {
  padding: 12px 16px;
  border-top: 1px solid var(--ch-b1);
  background: var(--ch-s1);
  flex-shrink: 0;
}
.ch-gen-btn {
  width: 100%;
  padding: 10px;
}
.ch-hint {
  font-size: 10px;
  color: var(--ch-t3);
  text-align: center;
  margin-top: 6px;
}
kbd {
  display: inline-block;
  padding: 1px 4px;
  border: 1px solid var(--ch-b2);
  border-radius: 2px;
  font-size: 10px;
  color: var(--ch-t3);
}

/* ─── Color Picker ────────────────────────────────────────────────────────────── */
.ch-view-picker {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.ch-picker-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 24px;
  overflow: auto;
}
.ch-wheel-wrap {
  position: relative;
  flex-shrink: 0;
}
.ch-wheel-canvas {
  border-radius: 50%;
  cursor: crosshair;
  touch-action: none;
  display: block;
}
.ch-wheel-cursor {
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.5),
    0 2px 6px rgba(0, 0, 0, 0.4);
  pointer-events: none;
  transform: translate(-50%, -50%);
}
.ch-sliders {
  width: 100%;
  max-width: 400px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.ch-slider-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.ch-slider-label {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--ch-t3);
}
.ch-slider-label span {
  color: var(--ch-t1);
  font-weight: 700;
}
.ch-hue-track {
  height: 10px;
  border-radius: 5px;
  background: linear-gradient(
    to right,
    #f00,
    #ff0,
    #0f0,
    #0ff,
    #00f,
    #f0f,
    #f00
  );
  margin: 2px 0;
}
.ch-sat-track,
.ch-lit-track,
.ch-alpha-track {
  height: 10px;
  border-radius: 5px;
  margin: 2px 0;
  position: relative;
}
.ch-alpha-checker {
  position: absolute;
  inset: 0;
  border-radius: 5px;
  background: repeating-conic-gradient(#444 0% 25%, #222 0% 50%) 0 0 / 8px 8px;
  z-index: 0;
}
.ch-alpha-track input {
  position: relative;
  z-index: 1;
}
.ch-hue-track input,
.ch-sat-track input,
.ch-lit-track input,
.ch-alpha-track input {
  -webkit-appearance: none;
  width: 100%;
  height: 100%;
  background: transparent;
  cursor: pointer;
  margin: 0;
  display: block;
}
.ch-hue-track input::-webkit-slider-thumb,
.ch-sat-track input::-webkit-slider-thumb,
.ch-lit-track input::-webkit-slider-thumb,
.ch-alpha-track input::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
  cursor: pointer;
}
.ch-color-preview-row {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  max-width: 400px;
}
.ch-cprev {
  width: 56px;
  height: 56px;
  border-radius: 4px;
  border: 2px solid var(--ch-b2);
  flex-shrink: 0;
}
.ch-cprev-inputs {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.ch-hex-inp-row {
  display: flex;
  gap: 6px;
  align-items: center;
}
.ch-hex-inp-row label {
  font-size: 10px;
  color: var(--ch-t3);
  min-width: 28px;
}
.ch-picker-panel {
  width: var(--ch-pw);
  background: var(--ch-s1);
  border-left: 1px solid var(--ch-b1);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  flex-shrink: 0;
  padding: 14px 16px;
  gap: 14px;
}
.ch-recent-swatches {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}
.ch-rswatch {
  width: 22px;
  height: 22px;
  border-radius: 3px;
  cursor: pointer;
  border: 1px solid rgba(255, 255, 255, 0.06);
  transition: transform 100ms;
}
.ch-rswatch:hover {
  transform: scale(1.15);
}
.ch-picker-info {
  font-size: 11px;
  color: var(--ch-t3);
  line-height: 2.1;
}
.ch-picker-info strong {
  color: var(--ch-t1);
}

/* ─── Tint Scale ──────────────────────────────────────────────────────────────── */
.ch-view-scale {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.ch-scale-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: auto;
  padding: 24px;
}
.ch-scale-swatch {
  width: 44px;
  height: 44px;
  border-radius: 3px;
  border: 2px solid var(--ch-b2);
  flex-shrink: 0;
}
.ch-scale-row {
  display: flex;
  border-radius: 3px;
  overflow: hidden;
  height: 52px;
  max-width: 900px;
}
.ch-scale-chip {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 2px;
  font-family: var(--ch-fm);
  font-size: 10px;
  cursor: pointer;
  transition: flex 100ms;
}
.ch-scale-chip:hover {
  flex: 1.4;
}
.ch-scale-step {
  font-weight: 700;
  letter-spacing: 0.04em;
}
.ch-scale-hex {
  opacity: 0.65;
  font-size: 9px;
}
.ch-scale-panel {
  width: var(--ch-pw);
  background: var(--ch-s1);
  border-left: 1px solid var(--ch-b1);
  overflow-y: auto;
  flex-shrink: 0;
  padding: 14px 16px;
}
.ch-token-pre {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: var(--ch-r);
  padding: 10px;
  font-size: 10px;
  line-height: 1.7;
  color: var(--ch-t3);
  white-space: pre;
  overflow-x: auto;
  max-height: 300px;
  overflow-y: auto;
}

/* ─── Color Blind ────────────────────────────────────────────────────────────── */
.ch-sim-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  max-width: 960px;
}
.ch-sim-card {
  background: var(--ch-s1);
  border: 1px solid var(--ch-b1);
  border-radius: 3px;
  overflow: hidden;
}
.ch-sim-card-hd {
  padding: 10px 14px;
  border-bottom: 1px solid var(--ch-b1);
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 8px;
}
.ch-sim-card-title {
  font-family: var(--ch-fd);
  font-size: 13px;
  font-weight: 700;
}
.ch-sim-card-sub {
  font-size: 10px;
  color: var(--ch-t3);
  text-align: right;
}
.ch-sim-strip {
  height: 60px;
  display: flex;
}
.ch-sim-chip {
  flex: 1;
  display: flex;
  align-items: flex-end;
  padding: 5px 3px;
}
.ch-sim-hex {
  font-size: 9px;
  font-family: var(--ch-fm);
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  opacity: 0.7;
}

/* ─── Gradient ────────────────────────────────────────────────────────────────── */
.ch-view-grad {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.ch-grad-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: auto;
  padding: 24px;
}
.ch-grad-preview {
  width: 100%;
  height: 200px;
  border-radius: 4px;
  margin-bottom: 16px;
  border: 1px solid var(--ch-b1);
  flex-shrink: 0;
  max-width: 960px;
}

/* Draggable stop bar */
.ch-grad-bar-wrap {
  margin-bottom: 16px;
  max-width: 960px;
}
.ch-grad-bar-track {
  position: relative;
  height: 40px;
  border-radius: 4px;
  cursor: crosshair;
  border: 1px solid var(--ch-b1);
  overflow: visible;
}
.ch-grad-stop-handle {
  position: absolute;
  top: 50%;
  width: 20px;
  height: 28px;
  border-radius: 3px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%);
  cursor: grab;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  transition:
    border-color 100ms,
    box-shadow 100ms;
  z-index: 2;
}
.ch-grad-stop-handle:active {
  cursor: grabbing;
}
.ch-grad-stop-handle.selected {
  border-color: #fff;
  box-shadow:
    0 0 0 2px var(--ch-acc),
    0 2px 8px rgba(0, 0, 0, 0.5);
  z-index: 3;
}
.ch-grad-stop-rm {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 16px;
  height: 16px;
  background: var(--ch-danger);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  cursor: pointer;
  border: none;
  color: #fff;
  padding: 0;
  line-height: 1;
}
.ch-grad-bar-hint {
  font-size: 10px;
  color: var(--ch-t3);
  margin-top: 6px;
}

.ch-grad-css-box {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: var(--ch-r);
  padding: 12px;
  font-family: var(--ch-fm);
  font-size: 11px;
  line-height: 1.8;
  color: var(--ch-t3);
  white-space: pre-wrap;
  word-break: break-all;
  max-width: 960px;
}
.ch-grad-panel {
  width: var(--ch-pw);
  background: var(--ch-s1);
  border-left: 1px solid var(--ch-b1);
  overflow-y: auto;
  flex-shrink: 0;
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* ─── Converter ──────────────────────────────────────────────────────────────── */
.ch-conv-swatch {
  width: 56px;
  height: 56px;
  border-radius: 4px;
  border: 2px solid var(--ch-b2);
  flex-shrink: 0;
  transition: background 0.15s;
}
.ch-conv-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.ch-conv-card {
  background: var(--ch-s1);
  border: 1px solid var(--ch-b1);
  border-radius: 3px;
  padding: 14px;
  position: relative;
}
.ch-conv-label {
  font-size: 10px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--ch-t3);
  margin-bottom: 6px;
  font-family: var(--ch-fd);
}
.ch-conv-val {
  font-family: var(--ch-fm);
  font-size: 12px;
  word-break: break-all;
  margin-bottom: 2px;
}
.ch-conv-sub {
  font-size: 10px;
  color: var(--ch-t3);
}
.ch-conv-copy {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: 2px;
  color: var(--ch-t3);
  font-size: 10px;
  padding: 2px 7px;
  cursor: pointer;
  font-family: var(--ch-fm);
  transition: color 100ms;
}
.ch-conv-copy:hover {
  color: var(--ch-t1);
}

/* ─── Accessibility ──────────────────────────────────────────────────────────── */
.ch-a11y-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.ch-a11y-table th,
.ch-a11y-table td {
  padding: 8px;
  border: 1px solid var(--ch-b1);
  text-align: center;
}
.ch-a11y-table th {
  background: var(--ch-s2);
  color: var(--ch-t3);
  font-size: 10px;
}
.ch-a11y-self {
  background: var(--ch-s2);
  color: var(--ch-t3);
}
.ch-a11y-pairs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 8px;
}
.ch-a11y-pair-card {
  background: var(--ch-s1);
  border: 1px solid var(--ch-b1);
  border-radius: 3px;
  overflow: hidden;
}

/* ─── Image Extract ──────────────────────────────────────────────────────────── */
.ch-drop-zone {
  border: 2px dashed var(--ch-b2);
  border-radius: 6px;
  padding: 48px 24px;
  text-align: center;
  cursor: pointer;
  transition:
    border-color 150ms,
    background 150ms;
}
.ch-drop-zone:hover,
.ch-drop-zone.dragover {
  border-color: var(--ch-acc);
  background: rgba(232, 255, 0, 0.03);
}
.ch-drop-title {
  font-family: var(--ch-fd);
  font-size: 17px;
  font-weight: 700;
  color: var(--ch-t2);
  margin-bottom: 6px;
}
.ch-drop-sub {
  font-size: 11px;
  color: var(--ch-t3);
}
.ch-img-row {
  display: flex;
  margin-top: 20px;
  gap: 18px;
}
.ch-img-preview {
  width: 100%;
  border-radius: 4px;
  border: 1px solid var(--ch-b2);
  display: block;
}
.ch-img-color-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 7px;
}

/* ─── Saved ───────────────────────────────────────────────────────────────────── */
.ch-saved-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
  gap: 10px;
}
.ch-saved-card {
  background: var(--ch-s1);
  border: 1px solid var(--ch-b1);
  border-radius: 3px;
  overflow: hidden;
  transition: border-color 120ms;
}
.ch-saved-card:hover {
  border-color: var(--ch-b2);
}

/* ─── Modals ──────────────────────────────────────────────────────────────────── */
.ch-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.78);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
  backdrop-filter: blur(6px);
  animation: ch-fin 0.1s ease;
}
@keyframes ch-fin {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.ch-modal {
  background: var(--ch-s1);
  border: 1px solid var(--ch-b2);
  border-radius: 4px;
  overflow: hidden;
  animation: ch-sup 0.15s var(--ch-ease);
}
@keyframes ch-sup {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
.ch-modal-hd {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 13px 16px;
  border-bottom: 1px solid var(--ch-b1);
}
.ch-modal-hd h2 {
  font-family: var(--ch-fd);
  font-size: 14px;
  font-weight: 700;
}
.ch-modal-close {
  background: none;
  border: none;
  color: var(--ch-t3);
  font-size: 20px;
  cursor: pointer;
  line-height: 1;
  padding: 0;
}
.ch-modal-close:hover {
  color: var(--ch-t1);
}
.ch-modal-bd {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.ch-modal-ft {
  display: flex;
  gap: 6px;
  padding: 12px 16px;
  border-top: 1px solid var(--ch-b1);
  justify-content: flex-end;
}
.ch-expre {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: var(--ch-r);
  padding: 12px;
  font-family: var(--ch-fm);
  font-size: 11px;
  line-height: 1.8;
  color: var(--ch-t3);
  white-space: pre;
  overflow-x: auto;
  max-height: 180px;
  overflow-y: auto;
}

/* ─── Contrast Checker ────────────────────────────────────────────────────────── */
.ch-contrast-preview {
  border-radius: 8px;
  padding: 32px 24px;
  margin-bottom: 20px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}
.ch-contrast-preview-lg {
  font-family: var(--ch-fd);
  font-size: 26px;
  font-weight: 800;
  margin-bottom: 8px;
}
.ch-contrast-preview-sm {
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 4px;
}
.ch-contrast-ratio-row {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 16px;
}
.ch-contrast-ratio-num {
  font-family: var(--ch-fd);
  font-size: 36px;
  font-weight: 800;
}
.ch-contrast-criteria {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 24px;
}
.ch-contrast-criterion {
  font-size: 13px;
  color: var(--ch-t2);
}
.ch-contrast-pickers {
  display: flex;
  align-items: flex-end;
  gap: 12px;
}
.ch-contrast-picker {
  flex: 1;
}
.ch-contrast-swap {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: 50%;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--ch-t2);
  font-size: 16px;
  flex-shrink: 0;
  margin-bottom: 20px;
  transition:
    border-color 100ms,
    color 100ms;
}
.ch-contrast-swap:hover {
  border-color: var(--ch-b2);
  color: var(--ch-t1);
}

/* ─── Color Mixer ─────────────────────────────────────────────────────────────── */
.ch-mixer-inputs {
  display: flex;
  gap: 24px;
  margin-bottom: 16px;
}
.ch-mixer-input-group {
  flex: 1;
}
.ch-mixer-strip {
  display: flex;
  height: 60px;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 8px;
}
.ch-mixer-chip {
  flex: 1;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 4px;
  cursor: pointer;
  transition: flex 100ms;
}
.ch-mixer-chip:hover {
  flex: 1.4;
}
.ch-mixer-compare {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.ch-mixer-compare-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.ch-mixer-compare-label {
  width: 52px;
  font-size: 10px;
  color: var(--ch-t3);
  text-align: right;
  flex-shrink: 0;
}
.ch-mixer-compare-strip {
  flex: 1;
  height: 28px;
  display: flex;
  border-radius: 3px;
  overflow: hidden;
}

/* ─── Scoring ─────────────────────────────────────────────────────────────────── */
.ch-score-layout {
  display: flex;
  gap: 32px;
  align-items: flex-start;
  margin-top: 8px;
}
.ch-score-radar {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}
.ch-score-overall {
  text-align: center;
}
.ch-score-bars {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.ch-score-bar-item {
  display: flex;
  flex-direction: column;
}

/* ─── Scrollbar ──────────────────────────────────────────────────────────────── */
.ch-app ::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}
.ch-app ::-webkit-scrollbar-track {
  background: transparent;
}
.ch-app ::-webkit-scrollbar-thumb {
  background: var(--ch-b2);
  border-radius: 2px;
}

/* ─── Responsive ──────────────────────────────────────────────────────────────── */
@media (max-width: 700px) {
  .ch-panel,
  .ch-picker-panel,
  .ch-scale-panel,
  .ch-grad-panel {
    width: 100%;
    border-left: none;
    border-top: 1px solid var(--ch-b1);
  }
  .ch-view-pal,
  .ch-view-picker,
  .ch-view-scale,
  .ch-view-grad {
    flex-direction: column;
  }
  .ch-pstrip {
    flex-direction: column;
  }
  .ch-slot {
    min-height: 70px;
    flex: none;
  }
  .ch-sim-grid,
  .ch-conv-grid {
    grid-template-columns: 1fr;
  }
  .ch-mixer-inputs {
    flex-direction: column;
    gap: 12px;
  }
  .ch-contrast-pickers {
    flex-direction: column;
  }
  .ch-score-layout {
    flex-direction: column;
  }
}

/* ─── Utility Colors View ──────────────────────────────────────────────────── */
.ch-utility-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}
.ch-utility-card {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: 6px;
  padding: 16px;
  transition: border-color 120ms;
}
.ch-utility-card:hover {
  border-color: var(--ch-b2);
}
.ch-utility-swatch-row {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}
.ch-utility-swatch {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border: 2px solid rgba(255, 255, 255, 0.08);
}
.ch-utility-meta {
  flex: 1;
  min-width: 0;
}
.ch-utility-label {
  font-family: var(--ch-fd);
  font-size: 14px;
  font-weight: 700;
  color: var(--ch-t1);
}
.ch-utility-desc {
  font-size: 10px;
  color: var(--ch-t3);
  line-height: 1.5;
  margin-top: 3px;
}
.ch-utility-lock {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 13px;
  padding: 0;
  opacity: 0.5;
  transition: opacity 100ms;
  line-height: 1;
}
.ch-utility-lock:hover,
.ch-utility-lock.locked {
  opacity: 1;
}
.ch-utility-previews {
  display: flex;
  gap: 10px;
  margin-top: 12px;
  flex-wrap: wrap;
}
.ch-utility-preview-item {
  display: flex;
  flex-direction: column;
}
.ch-utility-live-preview {
  border-radius: 8px;
  padding: 20px;
  border: 1px solid var(--ch-b1);
}

/* ─── Theme Generator View ─────────────────────────────────────────────────── */
.ch-theme-preview-pair {
  display: flex;
  gap: 12px;
  margin-bottom: 8px;
}
.ch-theme-preview-card {
  flex: 1;
  border-radius: 8px;
  overflow: hidden;
  min-width: 0;
}
.ch-theme-utility-preview {
  display: flex;
  gap: 16px;
}
.ch-theme-token-table {
  background: var(--ch-s2);
  border: 1px solid var(--ch-b1);
  border-radius: 6px;
  overflow: hidden;
}
.ch-theme-token-header {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 2fr;
  gap: 8px;
  padding: 8px 14px;
  font-size: 10px;
  color: var(--ch-t3);
  text-transform: uppercase;
  letter-spacing: 0.07em;
  border-bottom: 1px solid var(--ch-b1);
  background: var(--ch-s1);
}
.ch-theme-token-row {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 2fr;
  gap: 8px;
  padding: 8px 14px;
  align-items: center;
  border-bottom: 1px solid var(--ch-b1);
  transition: background 80ms;
}
.ch-theme-token-row:last-child {
  border-bottom: none;
}
.ch-theme-token-row:hover {
  background: var(--ch-s3);
}

/* ─── Responsive additions ─────────────────────────────────────────────────── */
@media (max-width: 700px) {
  .ch-utility-grid {
    grid-template-columns: 1fr;
  }
  .ch-theme-preview-pair {
    flex-direction: column;
  }
  .ch-theme-utility-preview {
    flex-direction: column;
  }
  .ch-theme-token-header,
  .ch-theme-token-row {
    grid-template-columns: 1fr 1fr;
  }
  .ch-theme-token-header span:last-child,
  .ch-theme-token-row span:last-child {
    display: none;
  }
}
